(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8581:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(1994)}])},1994:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return N}});var t=n(5893),a=n(7294),s=n(4051),c=n.n(s);function o(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function i(e,r,n,t,a,s,c){try{var o=e[s](c),i=o.value}catch(l){return void n(l)}o.done?r(i):Promise.resolve(i).then(t,a)}function l(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"===typeof e)return o(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=function(e,r,n,t){var s=(0,a.useState)([]),o=s[0],u=s[1],d=(0,a.useState)(!0),f=d[0],p=d[1],h=(0,a.useState)(!0),m=h[0],b=h[1],x=(0,a.useState)(""),j=x[0],v=x[1],g=(0,a.useRef)({}),y=(0,a.useRef)();return(0,a.useEffect)((function(){u([])}),[r,n,t]),(0,a.useEffect)((function(){var a=function(){var a,s=(a=c().mark((function a(){var s,o,i;return c().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(p(!0),y.current&&y.current.abort(),y.current=new AbortController,a.prev=3,o=e+r+n+t,!g.current[o]){a.next=10;break}s=g.current[o],console.log("Using stored fetch..."),a.next=20;break;case 10:return console.log("Fetching repos..."),a.next=13,fetch("https://api.github.com/orgs/dcard/repos?type=".concat(n,"&sort=").concat(r,"&page=").concat(e,"&direction=").concat(t,"&per_page=10"),{headers:{accept:"application/vnd.github.v3+json"},signal:y.current.signal});case 13:return i=a.sent,a.next=16,i.json();case 16:if("Array"===(s=a.sent).constructor.name){a.next=19;break}throw"Rate Limit Exceeded";case 19:g.current[o]=s;case 20:u((function(e){return l(e).concat(l(s))})),b(!!s.length),v(""),a.next=31;break;case 25:if(a.prev=25,a.t0=a.catch(3),"AbortError"!==a.t0.name){a.next=29;break}return a.abrupt("return");case 29:console.error(a.t0),v(a.t0.toString());case 31:return p(!1),a.abrupt("return",(function(){return y.current.abort()}));case 33:case"end":return a.stop()}}),a,null,[[3,25]])})),function(){var e=this,r=arguments;return new Promise((function(n,t){var s=a.apply(e,r);function c(e){i(s,n,t,c,o,"next",e)}function o(e){i(s,n,t,c,o,"throw",e)}c(void 0)}))});return function(){return s.apply(this,arguments)}}();a()}),[e,r,n,t]),{reposData:o,loading:f,hasNext:m,error:j}},d=function(e,r,n){var t=(0,a.useRef)();return{lastCardRef:(0,a.useCallback)((function(a){n||(t.current&&t.current.disconnect(),t.current=new IntersectionObserver((function(n){n[0].isIntersecting&&r&&e((function(e){return e+1}))})),a&&t.current.observe(a))}),[r,n])}},f=n(3365),p=n(8456),h=n(4073),m=n(4267),b=n(2023),x=n(4831),j=function(e){var r=e.html_url,n=e.name,a=e.description,s=e.visibility,c=e.updated_at,o=e.created_at,i=e.pushed_at,l=e.stargazers_count;return(0,t.jsxs)(h.Z,{className:"repo-card",children:[(0,t.jsxs)(m.Z,{children:[(0,t.jsx)("h2",{children:n}),(0,t.jsx)("p",{children:a}),(0,t.jsxs)("p",{children:["Visibility: ",s]}),(0,t.jsxs)("p",{children:["Created: ",o.split("T")[0]]}),(0,t.jsxs)("p",{children:["Updated: ",c.split("T")[0]]}),(0,t.jsxs)("p",{children:["Pushed: ",i.split("T")[0]]}),(0,t.jsxs)("p",{children:["Stars: ",l]})]}),(0,t.jsx)(b.Z,{children:(0,t.jsx)(x.Z,{size:"small",href:r,target:"_blank",children:"Link"})})]})};function v(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function g(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){v(e,r,n[r])}))}return e}var y=["all","public","private","forks","sources","member","internal"],w=["created","updated","pushed","full_name"],_=["asc","desc"],N=function(){var e=(0,a.useState)("all"),r=e[0],n=e[1],s=(0,a.useState)("created"),c=s[0],o=s[1],i=(0,a.useState)("desc"),l=i[0],h=i[1],m=(0,a.useState)(1),b=m[0],x=m[1],v=u(b,c,r,l),N=v.reposData,S=v.loading,k=v.hasNext,O=v.error,C=d(x,k,S).lastCardRef;return(0,t.jsxs)("main",{className:"index",children:[S&&1===b&&(0,t.jsx)("div",{className:"linear-progress-container",children:(0,t.jsx)(f.Z,{})}),(0,t.jsxs)("header",{className:"header",children:[(0,t.jsx)("h1",{children:"Dcard Repos"}),(0,t.jsxs)("form",{className:"header__form",onChange:function(){x(1)},children:[(0,t.jsxs)("label",{className:"dropdown-label",children:["Type:",(0,t.jsx)("select",{value:r,className:"dropdown",onChange:function(e){n(e.target.value)},children:y.map((function(e){return(0,t.jsx)("option",{className:"dropdown__item",children:e},"ditem-"+e)}))})]}),(0,t.jsxs)("label",{className:"dropdown-label",children:["Sort:",(0,t.jsx)("select",{value:c,className:"dropdown",onChange:function(e){o(e.target.value)},children:w.map((function(e){return(0,t.jsx)("option",{className:"dropdown__item",children:e},"ditem-"+e)}))})]}),(0,t.jsxs)("label",{className:"dropdown-label",children:["Direction:",(0,t.jsx)("select",{value:l,className:"dropdown",onChange:function(e){h(e.target.value)},children:_.map((function(e){return(0,t.jsx)("option",{className:"dropdown__item",children:e},"ditem-"+e)}))})]})]})]}),(0,t.jsx)("ul",{className:"repo-list",children:N.map((function(e,r){return(0,t.jsx)("li",{className:"repo-list__item",children:r+1===N.length?(0,t.jsx)("div",{style:{border:"red"},ref:C,children:(0,t.jsx)(j,g({},e))}):(0,t.jsx)(j,g({},e))},e.id)}))}),!O&&!S&&!N.length&&(0,t.jsx)("p",{children:"No Repos to show"}),O&&(0,t.jsxs)("p",{className:"error-message",children:["ERROR: ",O]}),S&&(0,t.jsx)("div",{className:"circular-progress-container",children:(0,t.jsx)(p.Z,{})})]})}}},function(e){e.O(0,[315,774,888,179],(function(){return r=8581,e(e.s=r);var r}));var r=e.O();_N_E=r}]);