(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8581:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(8756)}])},8756:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return w}});var t=n(5893),s=n(7294),a=n(4051),c=n.n(a);function o(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function i(e,r,n,t,s,a,c){try{var o=e[a](c),i=o.value}catch(l){return void n(l)}o.done?r(i):Promise.resolve(i).then(t,s)}function l(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"===typeof e)return o(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=function(e,r,n,t){var a=(0,s.useState)([]),o=a[0],u=a[1],d=(0,s.useState)(!1),p=d[0],f=d[1],h=(0,s.useState)(!0),m=h[0],j=h[1],x=(0,s.useState)(""),v=x[0],b=x[1],g=(0,s.useRef)({}),y=(0,s.useRef)();return(0,s.useEffect)((function(){var s=function(){var s,a=(s=c().mark((function s(){var a,i,d;return c().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(f(!0),y.current&&y.current.abort(),y.current=new AbortController,s.prev=3,i=e+r+n+t,!g.current[i]){s.next=10;break}a=g.current[i],console.log("Using stored fetch..."),s.next=18;break;case 10:return console.log("Fetching repos..."),s.next=13,fetch("https://api.github.com/orgs/dcard/repos?type=".concat(n,"&sort=").concat(r,"&page=").concat(e,"&direction=").concat(t,"&per_page=10"),{headers:{accept:"application/vnd.github.v3+json"},signal:y.current.signal});case 13:return d=s.sent,s.next=16,d.json();case 16:a=s.sent,g.current[i]=a;case 18:u(1===e?a:l(o).concat(l(a))),j(!!a.length),b(""),s.next=27;break;case 23:s.prev=23,s.t0=s.catch(3),console.error(s.t0),b(s.t0.toString());case 27:f(!1);case 28:case"end":return s.stop()}}),s,null,[[3,23]])})),function(){var e=this,r=arguments;return new Promise((function(n,t){var a=s.apply(e,r);function c(e){i(a,n,t,c,o,"next",e)}function o(e){i(a,n,t,c,o,"throw",e)}c(void 0)}))});return function(){return a.apply(this,arguments)}}();s()}),[e,r,n,t]),{reposData:o,loading:p,hasNext:m,error:v}},d=n(3365),p=n(8456),f=n(4073),h=n(4267),m=n(2023),j=n(4831),x=function(e){var r=e.html_url,n=e.name,s=e.description,a=e.visibility,c=e.updated_at,o=e.created_at,i=e.pushed_at,l=e.stargazers_count;return(0,t.jsxs)(f.Z,{className:"repo-card",children:[(0,t.jsxs)(h.Z,{children:[(0,t.jsx)("h2",{children:n}),(0,t.jsx)("p",{children:s}),(0,t.jsxs)("p",{children:["Visibility: ",a]}),(0,t.jsxs)("p",{children:["Created: ",o.split("T")[0]]}),(0,t.jsxs)("p",{children:["Updated: ",c.split("T")[0]]}),(0,t.jsxs)("p",{children:["Pushed: ",i.split("T")[0]]}),(0,t.jsxs)("p",{children:["Stars: ",l]})]}),(0,t.jsx)(m.Z,{children:(0,t.jsx)(j.Z,{size:"small",href:r,target:"_blank",children:"Link"})})]})};function v(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function b(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){v(e,r,n[r])}))}return e}var g=["all","public","private","forks","sources","member","internal"],y=["created","updated","pushed","full_name"],_=["asc","desc"],w=function(){var e=(0,s.useState)("all"),r=e[0],n=e[1],a=(0,s.useState)("created"),c=a[0],o=a[1],i=(0,s.useState)("desc"),l=i[0],f=i[1],h=(0,s.useState)(1),m=h[0],j=h[1],v=u(m,c,r,l),w=v.reposData,N=v.loading,S=v.hasNext,O=v.error,k=(0,s.useRef)(),C=(0,s.useCallback)((function(e){N||(k.current&&k.current.disconnect(),k.current=new IntersectionObserver((function(e){e[0].isIntersecting&&S&&j((function(e){return e+1}))})),e&&k.current.observe(e))}),[S,N]);return(0,t.jsxs)("main",{className:"index",children:[(0,t.jsx)("h1",{children:"Dcard Repos"}),(0,t.jsxs)("header",{children:[N&&1===m&&(0,t.jsx)("div",{className:"linear-progress-container",children:(0,t.jsx)(d.Z,{})}),(0,t.jsxs)("form",{onChange:function(e){j(1)},children:[(0,t.jsxs)("label",{children:["Type:",(0,t.jsx)("select",{value:r,className:"dropdown",onChange:function(e){n(e.target.value)},children:g.map((function(e){return(0,t.jsx)("option",{className:"dropdown__item",children:e},"ditem-"+e)}))})]}),(0,t.jsxs)("label",{children:["Sort:",(0,t.jsx)("select",{value:c,className:"dropdown",onChange:function(e){o(e.target.value)},children:y.map((function(e){return(0,t.jsx)("option",{className:"dropdown__item",children:e},"ditem-"+e)}))})]}),(0,t.jsxs)("label",{children:["Direction:",(0,t.jsx)("select",{value:l,className:"dropdown",onChange:function(e){f(e.target.value)},children:_.map((function(e){return(0,t.jsx)("option",{className:"dropdown__item",children:e},"ditem-"+e)}))})]})]})]}),(0,t.jsx)("ul",{className:"repo-list",children:w.map((function(e,r){return(0,t.jsx)("li",{className:"repo-list__item",children:r+1===w.length?(0,t.jsx)("div",{style:{border:"red"},ref:C,children:(0,t.jsx)(x,b({},e))}):(0,t.jsx)(x,b({},e))},e.id)}))}),!O&&!w.length&&(0,t.jsx)("p",{children:"No Repos to show"}),O&&(0,t.jsxs)("p",{className:"error-message",children:["ERROR: ",O]}),N&&(0,t.jsx)("div",{className:"circular-progress-container",children:(0,t.jsx)(p.Z,{})})]})}}},function(e){e.O(0,[315,774,888,179],(function(){return r=8581,e(e.s=r);var r}));var r=e.O();_N_E=r}]);